import{_ as p,i as m,r as n,o as u,d as c,e as r,f as a,w as t,j as i,k as d,t as f}from"./index.032997c5.js";import{Q as g}from"./QForm.00412b59.js";const h=m({name:"LoginPage",setup(){return{username:n(""),password:n(""),form:n(null),message:n("")}},methods:{async handleLogin(){if(this.message="",await new Promise(e=>this.form.validate().then(l=>e(l))))try{const{data:{token:e}}=await this.$axios.post(`${this.$API_URL}/login`,JSON.stringify({username:this.username,password:this.password}),{headers:{"Content-Type":"application/json"}});localStorage.setItem("token",e),this.$router.replace("/admin/")}catch{this.message="Error in username or password"}}}}),_={class:"login flex-center"},y={class:"container flex-center"},v={class:"flex-center poppins text-negative"};function w(o,e,l,L,V,$){return u(),c("div",_,[r("div",y,[a(g,{class:"form flex-center",ref:"form"},{default:t(()=>[a(i,{color:"primary",outlined:"",modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=s=>o.username=s),label:"Username",rules:[s=>s.length>0||"Please type something"]},{prepend:t(()=>[a(d,{name:"person",color:"secondary"})]),_:1},8,["modelValue","rules"]),a(i,{color:"secondary",outlined:"",modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=s=>o.password=s),label:"Password",rules:[s=>s.length>0||"Please type something"],type:"password"},{prepend:t(()=>[a(d,{name:"lock",color:"secondary"})]),_:1},8,["modelValue","rules"]),r("div",{class:"submit flex-center poppins",onClick:e[2]||(e[2]=(...s)=>o.handleLogin&&o.handleLogin(...s))},"Login"),r("div",v,f(o.message),1)]),_:1},512)])])}var x=p(h,[["render",w],["__scopeId","data-v-4d155532"]]);export{x as default};
